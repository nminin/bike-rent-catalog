<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Web App Example</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    #user-data p {
      color: red;
    }
  </style>
</head>
<body>

<h1 style="color: red;">Welcome to the Telegram Web App</h1>

<div id="user-data">
  <p><strong>User ID:</strong> <span id="user-id">Loading...</span></p>
  <p><strong>First Name:</strong> <span id="user-first-name">Loading...</span></p>
  <p><strong>Last Name:</strong> <span id="user-last-name">Loading...</span></p>
  <p><strong>Username:</strong> <span id="user-username">Loading...</span></p>
</div>

<script>
  // Ensure Telegram Web App API is initialized
  window.TelegramWebApp.onEvent('visibilityChanged', function() {
    // Only proceed once the Web App is fully visible and initialized
    if (window.TelegramWebApp.initDataUnsafe) {
      const userData = window.TelegramWebApp.initDataUnsafe;

      // Check if the data is available
      if (userData) {
        const userId = userData.user.id;
        const firstName = userData.user.first_name;
        const lastName = userData.user.last_name || 'N/A';  // Some users may not have a last name
        const username = userData.user.username || 'N/A';  // Some users may not have a username

        // Update the UI with user data
        document.getElementById('user-id').innerText = userId;
        document.getElementById('user-first-name').innerText = firstName;
        document.getElementById('user-last-name').innerText = lastName;
        document.getElementById('user-username').innerText = username;
      } else {
        console.error("User data not available.");
      }
    }
  });

  // Initialize Telegram Web App API
  window.TelegramWebApp.init();
</script>

</body>
</html>